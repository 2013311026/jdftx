<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JDFTx: Ionic minimization of a water molecule</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('IonicMin.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Ionic minimization of a water molecule </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="water-200.png" alt="water-200.png"/>
</div>
<p> Electronic minimization is a good first step, but you probably want to optimize the geometry of the water molecule. To turn on ionic minimization, add something similar to the following lines to your <a href="FirstCalc.html">water.in</a>: </p><pre class="fragment">#Ionic minimization:
ionic-minimize \
    nIterations 10 \
    energyDiffThreshold 1e-6 \
    knormThreshold 1e-4  #Threshold on RMS cartesian force
</pre><p>Now, rerun jdftx.</p>
<p>Once your new water calculation has finished, you can visualize the ionic minimize steps. To do this, locate the "scripts" directory of JDFTx, and look inside. This directory contains tools for postprocessing, for example. createXSF is one such script- this creates an XcrySDen structure file from JDFTx output, which can be viewed in a visualization program such as VESTA or XcrySDen.</p>
<p>Run: [path to scripts]/createXSF water.out water.axsf Animated</p>
<p>Now open XcrySDen, for instance, and open the water.axsf. You should be able to click through a number of slides corresponding to the geometry optimization steps. To visualize the water molecule as a molecule, rather than at the corners of the box, change the unit of repetition (Display -&gt; Unit of Repetition -&gt; Translational asymmetric unit)</p>
<p>Look through the beginning of the output file for various defaults that you might want to tweak next. Here follow some of the most likely candidates: </p><pre class="fragment">elec-ex-corr hyb-PBE0  # Why not mix in exact exchange? (gga-PBE by default)
elec-cutoff 30.0      # Plane-wave cutoff in Hartrees (20 by default)
wavefunction LCAO     # Initialize state from atomic orbitals (random by default)

#Customize electronic minimization:
electronic-minimize \
    nIterations 50 \
    energyDiffThreshold 1e-8  # who needs 16 digits?

dump End State            # Output wavefunctions etc. at end of run
dump-name water.$VAR      # with filenames water.wfns etc
initial-state water.$VAR  # and perhaps use them to start the next run</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 26 2017 13:05:55 for JDFTx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
