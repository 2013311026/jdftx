<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JDFTx: A first calculation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('FirstCalc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">A first calculation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="water-200.png" alt="water-200.png"/>
</div>
<p> A lot of effort in the research behind JDFTx has involved water: its dielectric response, equation of state, free energy functional etc. Therefore, a water molecule is a fitting first calculation: save the following to water.in: </p><pre class="fragment"># The input file is a list of commands, one per line
# The commands may appear in any order; group them to your liking
# Everything on a line after a # is treated as a comment and ignored
# Whitespace separates words; extra whitespace is ignored
# --------------- Water molecule example ----------------

# Set up the unit cell - each column is a bravais lattice vector in bohrs
# Hence this is a cubic box of side 10 bohr (Note that \ continues lines)
lattice \
    10 0  0 \
    0  10 0 \
    0  0  10

# Specify the pseudopotentials (this defines species O and H):
ion-species &lt;path-to-build-directory&gt;/pseudopotentials/GBRV/h_pbe_v1.uspp
ion-species &lt;path-to-build-directory&gt;/pseudopotentials/GBRV/o_pbe_v1.2.uspp

# Specify coordinate system and atom positions:
coords-type cartesian  #the other option is lattice (suitable for solids)
ion O   0.00 0.00  0.00  0  # The last 0 holds this atom fixed
ion H   0.00 1.13 +1.45  1  # while the 1 allows this one to move
ion H   0.00 1.13 -1.45  1  # during ionic minimization

dump-name water.$VAR  #Filename pattern for outputs
dump End Ecomponents  #Output energy components at the end
</pre><p>and modify the pseudopotential path. JDFTx comes with a set of ultrasoft pseudopotentials (*.uspp files) generated by <a href="http://www.physics.rutgers.edu/~dhv/uspp">USPP</a> that we will use in these tutorials. Thet are located in the build directory. You can use other pseudopotentials, either ultrasofts (*.uspp) or norm-conserving pseudopotentials in the Abinit FHI format (*.fhi). <a href="Pseudopotentials.html">Click here</a> for more ideas about where to acquire pseudopotentials.</p>
<p>Additionally, if you are using a specific group of pseudopotentials, you can specify that group instead of listing the individual species. For instance, to utilize pbe pseudopotentials from the GBRV set that comes with JDFTx, you can use the two commands: </p><pre class="fragment">ion-species  GBRV/$ID_pbe_v2.uspp
ion-species  GBRV/$ID_pbe_v1.uspp
</pre><p>For the example given, these commands will search for O_pbe_v2.uspp and H_pbe_v2.uspp, and if those files aren't found, then O_pbe_v1.uspp and/or H_pbe_v1.uspp. Similarly, to use the SG15 norm-conserving set that is also distributed with JDFTx, use the two commands: </p><pre class="fragment">ion-species SG15/$ID_ONCV_PBE-1.1.upf
ion-species SG15/$ID_ONCV_PBE-1.0.upf
</pre><p><br />
</p>
<p>Now, that basic input file can be run with </p><pre class="fragment">jdftx -i water.in -o water.out
</pre><p>That should complete in a few seconds and create files water.out and water.Ecomponents. Have a look at water.out. It lists the commands that were issued in the input file along with several more which have sensible defaults (along with the output of jdftx -t, this should tell you all you need to go further). For instance, the exchange functional defaults to GGA (elec-ex-corr gga-PBE), and the plane wave cutoff defaults to 20 (elec-cutoff 20). To change from the default plane wave cutoff, just add the command with a different value (elec-cutoff 30, for instance) to the input file, and run jdftx again. Note- the default behavior of jdftx is to concatenate output files. If you wish to overwrite your previous water.out file, then run jdftx with the option of -d.</p>
<p>The commands section is followed by initialization of the plane-wave grid, symmetries, pseudopotentials etc., and then the electronic minimization which logs the progress of the conjugate gradients minimizer. The default is to minimize for 100 iterations or the round-off error limit, whichever comes first. This example converges to double precision (16 digits) in around 40 iterations. Note that the ions have not been moved and the end of the output file lists the forces at the initial position. The output water.Ecomponents lists the break-up of the final minimized energy.</p>
<p>When the calculation has completed, files are written based on the options provided by the dump command. Here, we have requested a dump at the end of the run, with the energy components printed out, and with the files named according to dump-name. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 26 2017 13:05:55 for JDFTx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
