<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JDFTx: Moving between single images and periodic systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.1.1</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('CoulombTrunc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Moving between single images and periodic systems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="waterMolToBox.png" alt="waterMolToBox.png"/>
</div>
<p>JDFTx is built as a tool for use with molecular systems, surfaces, and solids. This versatility is particularly evident in the Coulomb truncation features, allowing one to construct systems where the Coulomb interaction ranges from aperiodic to fully periodic. To illustrate this feature, we will take a molecule from the <a href="http://cccbdb.nist.gov">NIST CCCBDB</a>, convert it from an xyz file to JDFTx input, put it in an appropriately-sized box, and truncate the Coulomb interaction in 3 dimensions.</p>
<p>Picking one of the many calculated geometries of water from the <a href="http://cccbdb.nist.gov">NIST CCCBDB</a>, we create an xyz file: </p><pre class="fragment">    3

    8       0       0       0.127118
    1       0       0.75799 -0.50847
    1       0       -0.75799        -0.50847
</pre><p>which we can save as Water.xyz (the "3" in the file is the total number of atoms).</p>
<p>In the scripts directory (which is in the jdftx directory, not in the build directory), we have a script called xyzToIonpos which converts an xyz format file (cartesian Angstrom) to JDFTx ionpos (cartesian Bohrs). Running this script: </p><pre class="fragment">&lt;JDFTx directory&gt;/scripts/xyzToIonpos WaterCart.xyz yes
</pre><p>, where the "yes" is an optional argument that shifts the atoms so that their bounding box is centered on the origin (convenient when using coulomb-truncation-embed), (Note- You can run this script with no input to see the usage.) the following output is produced: </p><pre class="fragment"># Ionic positions in cartesian coordinates:
ion  8   0.000000000000000   0.000000000000000   0.600543636422734  0
ion  1   0.000000000000000   1.432393534717671  -0.600543636422733  1
ion  1   0.000000000000000  -1.432393534717671  -0.600543636422733  1
Offseting atoms by ( -0.000000000000000 -0.000000000000000 0.360325425963175 ) bohrs
Bounding box x: [ 0.000000000000000 to 0.000000000000000 ] bohrs
Bounding box y: [ -1.432393534717671 to 1.432393534717671 ] bohrs
Bounding box z: [ -0.600543636422733 to 0.600543636422733 ] bohrs
</pre><p>We now have a centered molecule with coordinates in Bohr, and we can create the rest of our input file, similarly to the <a href="FirstCalc.html">first tutorial</a>, except now we can see if we can make our box smaller. We first run with a 10 bohr box: </p><pre class="fragment">lattice \
    10 0  0 \
    0  10 0 \
    0  0  10

# Specify the pseudopotentials (this defines species O and H):
ion-species &lt;path-to-build-directory&gt;/pseudopotentials/GBRV/h_pbe_v1.uspp
ion-species &lt;path-to-build-directory&gt;/pseudopotentials/GBRV/o_pbe_v1.2.uspp

# Specify coordinate system and atom positions:
coords-type cartesian  
ion  8   0.000000000000000   0.000000000000000   0.600543636422734  0
ion  1   0.000000000000000   1.432393534717671  -0.600543636422733  1
ion  1   0.000000000000000  -1.432393534717671  -0.600543636422733  1

dump-name water.$VAR  #Filename pattern for outputs
dump End Ecomponents  #Output energy components at the end
</pre><p>and record the energy:</p>
<p>Then we see what happens to the energy with coulomb truncation, then we will make the box even smaller. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 26 2017 12:58:06 for JDFTx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
