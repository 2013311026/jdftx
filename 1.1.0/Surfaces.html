<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JDFTx: Solids and liquids</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Surfaces.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Solids and liquids </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Solids: Pt-111 surface </h2>
<p>This example requires a platinum pseudopotential, perhaps obtain one from the <a href="http://opium.sourceforge.net">Opium website</a> and save it as Pt.fhi in the same directory as input file Pt3-vac.in (3 layers of platinum in vacuum): </p><pre class="fragment">#---------------- Platinum surface in vacuum ------------------
include Pt3-common.in   # Share common commands between runs

dump-name Pt3-vac.$var
</pre><p>and save the following as Pt3-common.in: </p><pre class="fragment">#--------- 3-layer Platinum surface (shared setup) ------------

# 1x1 fcc unit cells in first two directions
# (length Angstrom/sqrt(2) at 60 degrees)
# 10 times 111 plane spacing in third direction
# (perpendicular to other two with length 20*Angstrom/sqrt(3))

lattice \
    1.1572162  1.1572162  0.0000000 \
   -0.6681191  0.6681191  0.0000000 \
    0.0000000  0.0000000 10.9103391

#Cubic lattice constant of Platinum
latt-scale 3.94 3.94 3.94

#Pseudopotential and atom positions:
ion-species Pt.fhi
coords-type lattice #The following coordinates are in terms of lattice vectors
ion Pt -0.333333333333 -0.333333333333 -0.1  1
ion Pt  0.000000000000  0.000000000000  0.0  0    #Hold the central layer fixed
ion Pt  0.333333333333  0.333333333333  0.1  1

#Brillouin zone sampling
kpoint-folding 4 4 1   # 4x4x1 uniform k-mesh
kpoint 0 0 0  1      # gamma-centered k-point mesh

elec-ex-corr gga-pbe
dump End State Ecomponents

#Fermi fillings - this is a metal!
elec-n-bands 22             # Need extra partially occupied bands
elec-fermi-fillings 0 0.01  # Fillings are a fermi function with T = 10 mEh
</pre><p>For simplicity, I've omitted the electronic-minimize and ionic-minimize commands, so that each of these calculations would run for 100 iterations at fixed ionic positions. Also note that a realistic calculation would require more vaccum space (~ 20 layers in third direction suffices), more layers of Pt (5 works) and a finer k-point mesh.</p>
<p>Then again, running the above input file with <b>jdftx -i Pt3-vac.in -o Pt3-vac.out</b> should complete in a few minutes on your netbook without swapping. Notice that this time around, the State output includes Pt3-vac.wfns (wavefunctions), Pt3-vac.fillings (fillings per band, per k-point) and Pt3-vac.Haux (auxilliary Hamiltonian for the fillings algorithm). With fillings, this system does not converge to round-off error in 100 iterations, but definitely gets within uH of the final result. Also note that the energy reported during minimization is not Etot, but F because the variational quantity is the Helmholtz free energy that includes the electron entropy.</p>
<h2>Liquids: Implicit solvation </h2>
<p>Next we'll use the results of the previous calculation to initialize a solvated version of the above system using an implicit fluid model: a continuum dielectric with ionic screening. The implicit fluid model sets up the dielectric constant and ionic concentration at each point in space according to the electron density - it is therefore important to provide a good starting point for the solvated run (if you forget this, the code will perform a vacuum run automatically, but with an inflated ego). Save the following to Pt3-neutral.in: </p><pre class="fragment">#-------------- Neutral solvated Platinum surface ----------------
include Pt3-common.in

initial-state Pt3-vac.$var  # Start from the vacuum results
dump-name Pt3-neutral.$var

fluid LinearPCM  #Selects the implicit model dielectric (with optional ionic screening)
fluid-solvent H2O
fluid-cation Na+ 1. #1M of a unit-positive cation
fluid-anion Cl- 1. #1M of a unit-negative anion

#Augment the electron density used to determine dielectric
#with a gaussian to prevent fluid from entering the atomic cores
#(This is not required for pseudopotentials with partial cores)
chargeball Pt 1 0.4
</pre><p>and run <b>jdftx -i Pt3-neutral.in -o Pt3-neutral.out</b>. Note that with ionic-screening present, the absolute values of mu reported in the lines starting with FillingsAux are now meaningful, and in this case correspond to the potential of zero charge of Platinum (See K. Letchworth-Weaver and T.A. Arias, <a href="http://prb.aps.org/abstract/PRB/v86/i7/e075140">Phys. Rev. B 86, 075140 (2012)</a>).</p>
<p>Finally, we can run a calculation at constant electron chemical potential: a unique capability of this program. Save the following to Pt3-charged.in:</p>
<pre class="fragment">#-------------- Charged solvated Platinum surface ----------------
include Pt3-common.in

initial-state Pt3-neutral.$var  # Start from the neutral solvated results
dump-name Pt3-charged.$var

fluid LinearPCM
fluid-solvent H2O
fluid-cation Na+ 1.
fluid-anion Cl- 1.
chargeball Pt 1 0.4

target-mu -0.16  #Note that this is ~ 1V away from the neutral mu: -0.197
</pre><p>and run <b>jdftx -i Pt3-charged.in -o Pt3-charged.out</b>. The "target-mu" that sets the electron chemical potential is given, and reported, in Hartrees. Note that the reported energy now changes from F to G, because the variational quantity is the grand potential for the electrons which includes Lagrange multiplier term mu N for the corresponding Legendre transform.</p>
<p>This tutorial introduces the basics of electrochemistry calculations using JDFTx. As before, several options are available for each of the commands introduced here and these can be figured out from the output of <b>jdftx -t</b>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 26 2017 13:18:59 for JDFTx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
